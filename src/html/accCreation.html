<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset = "UTF-8">
    <link rel="stylesheet" href="../css/accCreation.css">
</head>

<body>
    <h1>Account Registration</h1>
    <br />

        <div class="inputBox">
            <label>Email:
                <input id="email" name="email"/>
            </label>
        </div>

        <div class="inputBox">
            <label>Password:
                <input id="password" name="password" type="password" />
                <p>*Password must be 8 characters or longer</p>
            </label>
        </div>

        <div class="inputBox">
            <label>Confirm Password:
                <input id="confirmPassword" name="confirmPassword" type="password" />
            </label>
        </div>

        <center><div class="accType">
            <!--<button class="dropdown" onclick="openCloseDropDown()" id="ddBtn">Account Type<img src="../assets/dropdown.svg" width="17px" height="17px"></button> -->
            <button class="dropdown" onclick="openCloseDropDown()" id="ddBtn"><span>Account Type</span><img src="../assets/dropdown.svg" width="17px" height="17px" id="ddImg" style="float: right"></button>
            <!--<span id="student"></span>
            <span id="instructor"></span>-->
            <!-- <button id="student" onclick="typeSelector('student')" class="ddOptions"></button>
            <button id="instructor" onclick="typeSelector('instructor')" class="ddOptions"></button> -->
            <ul class="ddList" id="ddList">
                <li id="student" onclick="typeSelector('student')"></li>
                <li id="instructor" onclick="typeSelector('')" style="margin-top: 8px"></li>
            </ul>
        </div></center>
        <script>
            function openCloseDropDown () {
                stdnt = document.getElementById("student");
                strctr = document.getElementById("instructor");
                
                if (stdnt.textContent === "") { // need to add functionality to select by Monday?
                    //console.log("called on the odd");
                    stdnt.textContent = "Student";
                    strctr.textContent = "Instructor";
                    stdnt.style.display = "block"; // new
                    strctr.style.display = "block"; // new
                    document.getElementById("ddList").style.backgroundColor = "#F0F0F0";
                } else {
                    //console.log("there should be something under the dropdown...", stdnt.textContent, strctr.textContent);
                    stdnt.textContent = "";
                    strctr.textContent = "";
                    stdnt.style.display = "none";
                    strctr.style.display = "none";
                    document.getElementById("ddList").style.backgroundColor = "#A5C7CE";
                }
            }

            function typeSelector (type) {
                var img = document.getElementById("ddImg"); // pls work
                if (type === 'student') {
                    //document.getElementById("ddBtn").innerText = "Student"; // removing icon... might not be feasible to fix within Sprint 2
                    document.querySelector("#ddBtn span").innerText = "Student";
                    document.querySelector("#ddBtn img").innerText = img;
                    openCloseDropDown();
                } else { 
                    //document.getElementById("ddBtn").textContent = "Instructor";
                    //document.getElementById("ddBtn").innerText = "Instructor";
                    document.querySelector("#ddBtn span").innerText = "Instructor";
                    document.querySelector("#ddBtn img").innerText = img;
                    openCloseDropDown();
                }
            }
        </script>

        <br /> <br />
        <!-- <center><span id="errMsg" style="color: red; display: inline-block; vertical-align: center; font-family: Arial; font-size: 16px"></span></center> -->
        <center><span id="errMsg" class="errMsg"></span></center>
        <center><button class="registerBtn" onclick="errDisplay()">Register</button></center> <!-- ONCLICK NEEDS TO DIRECT TO EITHER CONFIRM. OR RETURN ERR -->
        <!-- ALSO - SUCCESSFUL REGISTRATION SENDS CODE TO EMAIL!!! -->
        <script>
            function errDisplay () {
                var addr = document.getElementById("email").value;
                var pw = document.getElementById("password").value;
                var cpw = document.getElementById("confirmPassword").value;
                var err = document.getElementById("errMsg");
                if (addr === "" || pw === "" || cpw === "") {
                    err.textContent = "Please fill out all three fields and select a role";
                    //err.style.color = "red";
                } else if  (addr.slice(-12) !== "@buffalo.edu"){
                    err.textContent = "Email must be a buffalo.edu address";
                } else if (pw !== cpw) {
                    err.textContent = "Passwords do not match";
                } else if (document.querySelector("#ddBtn span").innerText !== "Student") {
                    err.textContent = "Please select an account type";
                } else { // IN THE FUTURE - ADD CHECK FOR IF EMAIL ALREADY REGISTERED
                    console.log("Success");
                    err.textContent = "";
                    document.location = 'accConfirmation.html'; // direct to confirmation page
                }
            }
        </script> 

</body>
</html>